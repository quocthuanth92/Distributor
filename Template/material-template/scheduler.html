<!DOCTYPE html>
<html class="nav-mini">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="height=device-height,width=device-width,initial-scale=1.0,maximum-scale=1.0, user-scalable=no">
<link href="img/favicon.png" rel="shortcut icon">
<link rel="stylesheet" type="text/css" href="css/jquery.theme.default.css">
<link rel="stylesheet" type="text/css" href="css/boothstrap.css">
<link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="css/dragtable.css">
<link rel="stylesheet" type="text/css" href="css/leaflet.css">

<link rel="stylesheet" type="text/css" href="css/component.css">
<link rel="stylesheet" type="text/css" href="css/icon.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/final.css">


<script src="js/jquery.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script src="js/jquery.tablesorter.2.28.10.js"></script>
<script src="js/jquery.tablesorter.widgets.2.28.10.js"></script>
<script src="js/widget-columnSelector.js"></script>

<script src="js/widget-scroller.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/angular.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/jquery.dragtable.js"></script>
<script src="js/leaflet.js"></script>
<script src="js/ui.js"></script>
<title>DMSpro eTool</title>
</head>
<body class="blue">
<div class="container">
	<div class="header block-theme">
		<div class="insider">
			<div class="logo-box">
				<a class="logo-text" href="index.html">DMSpro eTool</a>
			</div>
			<div class="menu-box">
				<a class="btn-navigation" href="javascript:void(0)"></a>
				<h1 class="page-title">Scheduler</h1>
				<div class="log-box">
					<ul>
						<li>
							<div class="fl p-10-0 user-account">
								<span>Hello</span> 
								<a href="javascript:void(0)">Thuan.Tran</a> 
							</div>
							<a href="javascript:void(0)">
								<figure class="mini-circle-box fl mr-5">
									<img alt="Thuan.Tran" src="img/employee/1.jpg">
								</figure>
							</a>
						</li>
						<li class="Not audittice">
							<a href="javascript:void(0)">
								<i class="icon-etool-bell icon-etool-white"></i><span class="count">9</span>
							</a>
							<div>
								<div class="title block-theme">
									<h2>Not audittice</h2>
									<span class="btn-close">
										<a href="javascript:void(0)"><i class="icon-delete icon-white"></i></a>
									</span>
								</div>
								<div class="block-content">
									<ul>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-2.jpg" /></a>
											</div>
											<div class="describe">
												<h3>Cô Ba outlet</h3>
												<p>
													Route: RE09118<br/>
													Employee name: Nguyễn Hữu Phước<br/>
													Employee code: NV0978
												</p>
											</div>
										</li>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-1.jpg" /></a>
											</div>
											<div class="describe">
												<h3>Family Smart Convenient Market</h3>
												<p>
													Route: RE07113<br/>
													Employee name: Nguyễn Văn Thành<br/>
													Employee code: NV0918
												</p>
											</div>
										</li>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-3.jpg" /></a>
											</div>
											<div class="describe">
												<h3>Cửa hàng tạp hóa chú Tư Dzềnh </h3>
												<p>
													Route: RE07115<br/>
													Employee name: Ngô Thị Trúc<br/>
													Employee code: NV0966
												</p>
											</div>
										</li>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-2.jpg" /></a>
											</div>
											<div class="describe">
												<h3>Cửa hàng tạp hóa cô Tư ngã tư Bảy Hiền</h3>
												<p>
													Route: RE08116<br/>
													Employee name: Nguyễn Hữu Phước<br/>
													Employee code: NV0972
												</p>
											</div>
										</li>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-1.jpg" /></a>
											</div>
											<div class="describe">
												<h3>BNot auditod #ore</h3>
												<p>
													Route: RE04111<br/>
													Employee name: Nguyễn Văn Thành<br/>
													Employee code: NV0971
												</p>
											</div>
										</li>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-3.jpg" /></a>
											</div>
											<div class="describe">
												<h3>Co Sau outlet</h3>
												<p>
													Route: RE07513<br/>
													Employee name: Ngô Thị Trúc<br/>
													Employee code: NV0809
												</p>
											</div>
										</li>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-2.jpg" /></a>
											</div>
											<div class="describe">
												<h3>Nguyen Nam outlet</h3>
												<p>
													Route: RE09111<br/>
													Employee name: Nguyễn Hữu Phước<br/>
													Employee code: NV0911
												</p>
											</div>
										</li>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-1.jpg" /></a>
											</div>
											<div class="describe">
												<h3>Gmart Fastfood</h3>
												<p>
													Route: RE09125<br/>
													Employee name: Nguyễn Văn Thành<br/>
													Employee code: NV0432
												</p>
											</div>
										</li>
										<li>
											<div class="mini-square-box fl mr-10">
												<a href="javascript:void(0)"><img src="img/outlet/outlet-3.jpg" /></a>
											</div>
											<div class="describe">
												<h3>Thành Trung co.op</h3>
												<p>
													Route: RE02118<br/>
													Employee name: Ngô Thị Trúc<br/>
													Employee code: NV0118
												</p>
											</div>
										</li>
									</ul>
								</div>
							</div>
						</li>
						<li class="language">
							<a href="javascript:void(0)">
								<i class="icon-etool-global icon-etool-white"></i>
							</a>
							<div>
								<ul>
									<li class="selected">
										<a href="javascript:void(0)">
											Tiếng Việt
										</a>
									</li>
									<li>
										<a href="javascript:void(0)">
											English
										</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<button class="btn btn-default"><i class="icon-logout icon-black"></i></button>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div class="navigation">
		<div class="nav-box">
			<ul>
				<li>
					<a class="icon_has-child" href="javascript:void(0)">
						<i class="icon-etool-qlik icon-etool-black"></i>
						<span class="tooltip"><div class="arrow-left"><i class="icon-left"></i></div>Business Intelligence</span>
					</a>
					<ul>
						<li>
							<a href="bi-sales-situation.html">
								<span class="tooltip">Sales Situation</span>
							</a>
						</li>
						<li>
							<a href="bi-inventory-situation.html">
								<span class="tooltip">Inventory Situation</span>
							</a>
						</li>
						<li>
							<a href="bi-coverage-situation.html">
								<span class="tooltip">Coverage Situation</span>
							</a>
						</li>
						<li>
							<a href="bi-forecast.html">
								<span class="tooltip">Sales Forecasting</span>
							</a>
						</li>
					</ul>
				</li>
				<li>
					<a class="icon_has-child" href="javascript:void(0)">
						<i class="icon-etool-esri icon-etool-black"></i>
						<span class="tooltip"><div class="arrow-left"><i class="icon-left"></i></div>Decision Assistance</span>
					</a>
					<ul>
						<li>
							<a href="gis-transport-intelligence.html">
								<span class="tooltip">Transport Intelligence</span>
							</a>
						</li>
						<li>
							<a href="gis-tapestry-segmentation.html">
								<span class="tooltip">Tapestry Segmentation</span>
							</a>
						</li>
						<li>
							<a href="gis-demographic.html">
								<span class="tooltip">Demographic</span>
							</a>
						</li>
						<li>
							<a href="gis-diversity-index.html">
								<span class="tooltip">Diversity Index</span>
							</a>
						</li>
						<li>
							<a href="gis-education-situation.html">
								<span class="tooltip">Education Situation</span>
							</a>
						</li>
						<li>
							<a href="gis-unemployment.html">
								<span class="tooltip">Unemployment rate</span>
							</a>
						</li>
					</ul>
				</li>
				<li>
					<a class="icon_has-child" href="javascript:void(0)">
						<i class="icon-etool-system-management icon-etool-black"></i>
						<span class="tooltip"><div class="arrow-left"><i class="icon-left"></i></div>System management</span>
					</a>
					<ul>
						<li>
							<a href="manage-permission-by-role.html">
								<span class="tooltip">Permission by role</span>
							</a>
						</li>
						<li>
							<a href="manage-user-list.html">
								<span class="tooltip">User list</span>
							</a>
						</li>
						<li>
							<a href="manage-role.html">
								<span class="tooltip">Manage  role</span>
							</a>
						</li>
						<li>
							<a href="manage-language.html">
								<span class="tooltip">Language</span>	
							</a>
						</li>
						<li>
							<a href="manage-menu-config.html">
								<span class="tooltip">Config menu</span>
							</a>
						</li>
						<li>
							<a href="manage-product.html">
								<span class="tooltip">Manage product</span>
							</a>
						</li>
						<li>
							<a href="manage-user-history.html">
								<span class="tooltip">User history</span>
							</a>
						</li>
						<li>
							<a href="manage-reason.html">
								<span class="tooltip">Image audit reason</span>
							</a>
						</li>
					</ul>
				</li>
				
				<li>
					<a class="icon_has-child" href="javascript:void(0)">
						<i class="icon-etool-report icon-etool-black"></i>
						<span class="tooltip"><div class="arrow-left">
						<i class="icon-left"></i></div>Report</span>
					</a>
					<ul>
						<li>
							<a href="report-visited.html">
								<span class="tooltip">Daily visit</span>
							</a>
						</li>
						<li>
							<a href="report-synchronous.html">
								<span class="tooltip">PDA synchronous situation</span>
							</a>
						</li>
						<li>
							<a href="report-visit-result.html">
								<span class="tooltip">Visit result</span>
							</a>
						</li>
						<li>
							<a href="report-sale-index.html">
								<span class="tooltip">Sales indicator</span>
							</a>
						</li>
						<li>
							<a href="report-outlet-without-coordinates.html">
								<span class="tooltip">Outlet without coordinates</span>
							</a>
						</li>
						<li>
							<a href="report-assessment-PC.html">
								<span class="tooltip">Assessment PC</span>
							</a>
						</li>
						<li>
							<a href="report-base-result.html">
								<span class="tooltip">Base visit result</span>
							</a>
						</li>
						<li>
							<a href="report-working-weekly.html">
								<span class="tooltip">Working weekly</span>
							</a>
						</li>
						<li>
							<a href="report-timekeeping.html">
								<span class="tooltip">Timekeeping</span>
							</a>
						</li>
						<li>
							<a href="report-coverage-general.html">
								<span class="tooltip">Coverage general</span>
							</a>
						</li>
						<li>
							<a href="report-coverage-detail.html">
								<span class="tooltip">Coverage detail</span>
							</a>
						</li>
						<li>
							<a href="report-manual-audit-result.html">
								<span class="tooltip">Manual audit result</span>
							</a>
						</li>
						<li>
							<a href="report-auto-assume-result.html">
								<span class="tooltip">Auto audit result</span>
							</a>
						</li>
						<li>
							<a href="report-auto-assume-performance.html">
								<span class="tooltip">Auto audit performance</span>
							</a>
						</li>
					</ul>
				</li>
				
				<li>
					<a class="icon_has-child" href="javascript:void(0)">
						<i class="icon-etool-image icon-etool-black"></i>
						<span class="tooltip"><div class="arrow-left"><i class="icon-left"></i></div>Visibility</span>
					</a>
					<ul>
						<li>
							<a href="visibility-define-display.html">
								<span class="tooltip">Display period list</span>
							</a>
						</li>
						<li>
							<a href="visibility-assign-outlet-to-auditor.html">
								<span class="tooltip">Allocate outlet to auditor</span>	
							</a>
						</li>
						<li>
							<a href="visibility-image-assume.html">
								<span class="tooltip">Display image audit</span>
							</a>
						</li>
						<li>
							<a href="visibility-review-assume.html">
								<span class="tooltip">Manual audit result review</span>
							</a>
						</li>
						<li>
							<a href="visibility-auto-image-assume.html">
								<span class="tooltip">Auto audit result review</span>
							</a>
						</li>
						<li>
							<a href="visibility-report-deny-image.html">
								<span class="tooltip">Denied image list</span>
							</a>
						</li>
						<li>
							<a href="visibility-auto-image-assume.html">
								<span class="tooltip">Auto image audit</span>
							</a>
						</li>
						<li>
							<a href="visibility-baseline-display.html">
								<span class="tooltip">Baseline display program</span>
							</a>
						</li>
					</ul>
				</li>
				<li class="selected">
					<a class="icon_has-child" href="javascript:void(0)">
						<i class="icon-etool-calendar icon-etool-black"></i>
						<span class="tooltip"><div class="arrow-left"><i class="icon-left"></i></div>eCalendar</span>
					</a>
					<ul>
						<li class="selected">
							<a href="scheduler.html">
								<span class="tooltip">Scheduler</span>
							</a>
						</li>
						<li>
							<a href="scheduler-pending.html">
								<span class="tooltip">Pending</span>	
							</a>
						</li>
						<li>
							<a href="scheduler-review.html">
								<span class="tooltip">Review</span>	
							</a>
						</li>
						<li>
							<a href="scheduler-monitoring.html">
								<span class="tooltip">Monitoring</span>	
							</a>
						</li>
						<li>
							<a href="scheduler-result.html">
								<span class="tooltip">Result</span>	
							</a>
						</li>
						
						<li>
							<a href="scheduler-assessment.html">
								<span class="tooltip">Assessment</span>	
							</a>
						</li>
					</ul>
				</li>
				
				<li>
					<a href="sales-auditor.html">
						<i class="icon-etool-saleman-route icon-etool-black"></i>
						<span class="tooltip">Sales auditor</span>
					</a>
				</li>
				<li>
					<a href="route-performance.html">
						<i class="icon-etool-performance icon-etool-black"></i>
						<span class="tooltip">Route optimize</span>
					</a>
				</li>
				<li>
					<a href="index.html">
						<i class="icon-etool-mcp-situation icon-etool-black"></i>
						<span class="tooltip">Coverage monitoring</span>
					</a>
				</li>
				
			</ul>
		</div>
		<div class="color-box">
			<ul>
				<li class="theme-option">
					<a href="javascript:void(0)">
						<i class="icon-etool-theme icon-etool-black"></i>
						<span class="tooltip">
							Color palette
							<span class="circle circle-red" theme="red"></span>
							<span class="circle circle-orange" theme="orange"></span>
							<span class="circle circle-cyan" theme="cyan"></span>
							<span class="circle circle-blue" theme="blue"></span>
							<span class="circle circle-magenta" theme="magenta"></span>
						</span>
					</a>
				</li>
			</ul>
		</div>
	</div>
	<div class="content">
		<div class="insider">
			<div class="row content-body">
				<div class="tab-header">
					<div class="report-box fl p-10">
						<div class="item fl">
							<span class="reports-explain explain-white"></span>New task
						</div>
						<div class="item fl">
							<span class="reports-explain explain-blue"></span>Pending
						</div>
						<div class="item fl">
							<span class="reports-explain explain-green"></span>Approved
						</div>
						<div class="item fl">
							<span class="reports-explain explain-red"></span>Denied
						</div>
						<div class="item fl">
							<span class="reports-explain explain-yellow"></span>Resquest to remove
						</div>
					</div>
					<div class="alert alert-info fl w-auto m-3">
						<strong>Info!</strong> You can only create task in next month and change tasks without pending and approved.
					</div>
					<div class="toolbox">
						
						<ul class="fr m-0">
							<li>
								<button class="btn-blue" title="Submit"><i class="icon-submit icon-white"></i></button>
								<button title="Save"><i class="icon-save"></i></button>
							</li>
							<li>
								<button class="btn-refresh" title="Refresh"><i class="icon-update"></i></button>
							</li>
							<li>
								<button title="Print"><i class="icon-print"></i></button>
								<button title="Excel"><i class="icon-excel"></i></button>
								<button title="PDF"><i class="icon-pdf"></i></button>
							</li>
							<li>
								<button class="btn-screenmode">
									<i class="icon-fullscreen"></i>
								</button>
							</li>
						</ul>
					</div>
				</div>
				
				<div class="scheduler-container">
					<link rel="stylesheet" type="text/css" href="css/kendo.common.min.css">
					<link rel="stylesheet" type="text/css" href="css/kendo.uniform.min.css">
					<link rel="stylesheet" type="text/css" href="css/kendo.common.material.min.css">
					<script src="js/kendo.all.min.js"></script>
					<script src="js/kendo.validator.min.js"></script>
					<script src="js/jquery.signalr-1.1.3.min.js"></script>
					<link rel="stylesheet" type="text/css" href="css/kendo.default.min.css">
					<link rel="stylesheet" type="text/css" href="css/kendo.mobile.all.min.css">
					<div class="scheduler"></div>
					<script id="event-template" type="text/x-kendo-template">
						<div class="k-event-template row">
							<div class="align-center" style="line-height: 20px;">#: kendo.toString(start, "hh:mm") ##: kendo.toString(start, "tt") # - #: kendo.toString(end, "hh:mm") ##: kendo.toString(end, "tt") #</div>
							<div class="align-center" style="line-height: 20px;">#: title #</div>
							
						</div>
					</script>
					<script id="customEditorTemplate" type="text/x-kendo-template">
						<div class="k-edit-label"><label for="title">Title</label></div>
						<div data-container-for="title" class="k-edit-field">
							<input type="text" class="k-input k-textbox" name="title" required="required" data-bind="value:title" >
						</div>
						<div class="k-edit-label">
							<label for="start">Start</label>
						</div>
						<div data-container-for="start" class="k-edit-field">
							<input type="text" 
								   data-role="datetimepicker"
								   data-interval="15"
								   data-type="date"
								   data-bind="value:start,invisible:isAllDay"
								   name="start" />
							<input type="text" data-type="date" data-role="datepicker" data-bind="value:start,visible:isAllDay" name="start" />
							<span data-bind="text: startTimezone"></span>
							<span data-for="start" class="k-invalid-msg" style="display: none;"></span>
						</div>
						<div class="k-edit-label"><label for="end">End</label></div>
						<div data-container-for="end" class="k-edit-field">
							<input type="text" data-type="date" data-role="datetimepicker" data-bind="value:end,invisible:isAllDay" name="end" data-datecompare-msg="End date should be greater than or equal to the start date" />
							<input type="text" data-type="date" data-role="datepicker" data-bind="value:end,visible:isAllDay" name="end" data-datecompare-msg="End date should be greater than or equal to the start date" />
							<span data-bind="text: endTimezone"></span>
							<span data-bind="text: startTimezone, invisible: endTimezone"></span>
							<span data-for="end" class="k-invalid-msg" style="display: none;"></span>
						  </div>
						<div class="k-edit-label"><label for="isAllDay">All day event</label></div>
						<div data-container-for="isAllDay" class="k-edit-field">
							<select name="isAllDay" data-bind="value:isAllDay" data-role="dropdownlist" required="required" data-value-field="value" data-text-field="text">
								<option value="true">Yes</option>
								<option value="false">No</option>
							</select>
						</div>
						<div class="k-edit-label"><label for="recurrenceRule">Repeat</label></div>
						<div data-container-for="recurrenceRule" class="k-edit-field">
							<div data-bind="value:recurrenceRule" name="recurrenceRule" data-role="recurrenceeditor" data-frequencies="['never','daily']"></div>
						</div>
						<div class="k-edit-label"><label for="description">Description</label></div>
						<div data-container-for="description" class="k-edit-field">
							<textarea name="description" class="k-textbox" data-bind="value:description"></textarea>
						</div>
						
						<!--Status-->
						<div class="k-edit-label"><label for="statusID">Status</label></div>
						<div data-container-for="statusID" class="k-edit-field">
							<select name="statusID" class="readonly" data-bind="value:statusID"  required="required" data-role="dropdownlist" data-value-field="value" data-text-field="text" readonly>
								<option value="1" selected>New task</option>
								<option value="2">Approve</option>
								<option value="3">Deny</option>
								<option value="4">Request to remove</option>
								<option value="5">Pending</option>
							</select>
						</div>
  
						<!--Owner-->
						<div class="k-edit-label"><label for="ownerID">Owner</label></div>
						<div data-container-for="ownerID" class="k-edit-field">
							<select name="ownerID" class="readonly" data-bind="value:ownerID"  required="required" data-role="dropdownlist"
											data-value-field="value" data-text-field="text" readonly>
								<option value="1" selected>Tran Quoc Thuan</option>
								<option value="2">Nguyen Van Quynh</option>
								<option value="3">Tran Anh Tuan</option>
							</select>
						</div>
						
						
						
						<!--WorkWith-->
						<div class="k-edit-label"><label for="workwithID">Work with</label></div>
						<div data-container-for="workwithID" class="k-edit-field">
							<select name="workwithID" data-bind="value:workwithID" required="required" data-role="dropdownlist" data-value-field="value" data-text-field="text">
								<option value="0" selected>Please select</option>
								<option value="1">Nguyen Van Nam</option>
								<option value="2">Pham Minh Chinh</option>
								<option value="3">Bui Trung Nghia</option>
							</select>
						</div>
						
						<!--WorkType-->
						<div class="k-edit-label"><label for="worktypeID">Work type</label></div>
						<div data-container-for="worktypeID" class="k-edit-field">
							<select name="worktypeID" data-bind="value:worktypeID" required="required" data-role="dropdownlist" data-value-field="value" data-text-field="text">
								<option value="0" selected>Please select</option>
								<option value="1">Monitor</option>
								<option value="2">Training</option>
							</select>
						</div>
						
						<!--Certification-->
						<div class="k-edit-label"><label for="certificationID">Certification</label></div>
						<div data-container-for="certificationID" class="k-edit-field">
							<select name="certificationID" data-bind="value:certificationID" required="required" data-role="dropdownlist" data-value-field="value" data-text-field="text">
								<option value="0" selected>Please select</option>
								<option value="1">No certification</option>
								<option value="2">Primary Sales</option>
								<option value="3">Secondary Sales</option>
								<option value="3">Premium Sales</option>
							</select>
						</div>
						
						
						
					</script>
					<script>
						var hub,
							hubStart;
						$(function () {
							var hubUrl = "https://demos.telerik.com/kendo-ui/service/signalr/hubs";
							var connection = $.hubConnection(hubUrl, { useDefaultPath: false });
							hub = connection.createHubProxy("meetingHub");
							hubStart = connection.start({ jsonp: true });

							$("#notification").kendoNotification({
								width: "100%",
								position: {
									top: 0,
									left: 0
								}
							});
						})
					</script>
					<script>

						$(function () {
							checkScheduleHeight();
							d = new Date();
							//console.log(scheduler_height);
							$(".scheduler").kendoScheduler({
								date: new Date("2017/5/1"),
								startTime: new Date("2017/5/1 6:00:00"),
								endTime: new Date("2017/5/1 21:00:00"),
								minDate: new Date("2017/5/1"),
								maxDate : new Date("2017/5/31"),
								height: scheduler_height,
								selectable: true,
								autoBind: true,
								eventTemplate: $("#event-template").html(),
								editable: {
									template: $("#customEditorTemplate").html(),
									//create: false,
									//destroy: false,
									//move: false,
									//resize: false
								},
								add: function(e){
									checkDayInNextMonth(e);
								},
								edit: function(e){
									hideButtonTaskIsApprovedOrPending(e);
									/** Hide repeat */
									/*
									e.container.find("[for=recurrenceRule]").parent().hide();
									e.container.find("[data-container-for=recurrenceRule]").hide();
									*/
								},
								save: function(e){
									checkDayInNextMonth(e);
									checkTaskIsApprovedOrPending(e);
								},
								destroy: function(e){
									checkDayInNextMonth(e);
									checkTaskIsApprovedOrPending(e);
								},
								remove: function(e){
									checkDayInNextMonth(e);
									checkTaskIsApprovedOrPending(e);
								},
								views: [
									{ type: "day"},
									{ type: "week"},
									{ type: "month", selected: true },
								],
								timezone: "Etc/UTC",
								
								dataSource: {
									batch: true,
									transport: {
										read: {
											url: "http://192.168.10.24:9090/data_ecalendar/kendo-read-beta.php?req=read",//"https://demos.telerik.com/kendo-ui/service/tasks",
											dataType: "jsonp"
										},
										update: {
											url: "http://192.168.10.24:9090/data_ecalendar/kendo-read-beta.php?req=update",
											dataType: "jsonp"
										},
										create: {
											url: "http://192.168.10.24:9090/data_ecalendar/kendo-read-beta.php?req=create",//"http://192.168.10.24:9090/data_ecalendar/kendo-read-beta.php?req=create",
											dataType: "jsonp"
										},
										destroy: {
											url: "http://192.168.10.24:9090/data_ecalendar/kendo-read-beta.php?req=destroy",
											dataType: "jsonp"
										},
										parameterMap: function(options, operation) {
											if (operation !== "read" && options.models) {
												return {models: kendo.stringify(options.models)};
											}
										}
									},
									schema: {
										model: {
											id: "taskId",
											fields: {
												taskId: { from: "TaskID", type: "number", editable: false },
												title: { from: "Title", defaultValue: "No title", validation: { required: true } },
												start: { type: "date", from: "Start", validation: { required: true }},
												end: { type: "date", from: "End", validation: { required: true } },
												startTimezone: { from: "StartTimezone" },
												endTimezone: { from: "EndTimezone" },
												description: { from: "Description" },
												recurrenceId: { from: "RecurrenceID" },
												recurrenceRule: { from: "RecurrenceRule" },
												recurrenceException: { from: "RecurrenceException" },
												isAllDay: { type: "boolean", from: "IsAllDay", validation: { required: true }},
												statusID: { type:"number", from: "StatusID", defaultValue: 1 , validation: { required: true } },
												ownerID: { type:"number", from: "OwnerID", defaultValue: 1, validation: { required: true } },
												certificationID: { type:"number", from: "CertificationID", validation: { required: true }},
												workwithID: { type:"number", from: "WorkWithID", validation: { required: true } },
												worktypeID: { type:"number", from: "WorkTypeID", validation: { required: true } },
											}
										}
									},
									filter: {
										logic: "or",
										filters: [
											{ field: "ownerID", operator: "eq", value: 1 },
										]
									}
								},
								resources: [
									{
										field: "statusID",
										title: "Status",
										dataSource: [
											{ text: "New task", value: 1, color: "#eee" },
											{ text: "Approve", value: 2, color: "#8fd185" },
											{ text: "Deny", value: 3, color: "#ffa0a0" },
											{ text: "Request to remove", value: 4, color: "#ddc128" },
											{ text: "Pending", value: 5, color: "#9ca8ff" }
										]
									},
									{
										field: "ownerID",
										title: "Owner",
										dataSource: []
									},
									{
										field: "workwithID",
										title: "Work With",
										dataSource: []
									},
									{
										field: "certificationID",
										title: "Certification",
										dataSource: []
									},
									{
										field: "worktypeID",
										title: "Work Type",
										dataSource: []
									}
									
								]
							});

							$(document.body).keydown(function (e) {
								if (e.altKey && e.keyCode == 87) {
									$(".scheduler").data("kendoScheduler").wrapper.focus();
								}
							});
							
							var scheduler = $(".scheduler").data("kendoScheduler");
							
							$("#date").kendoDatePicker({
								value: new Date(''),
								change: function() {
									scheduler.date(this.value());
								}
							});

							$("#views").kendoDropDownList({
								value: scheduler.view().name,
								change: function() {
									scheduler.view(this.value());
								}
							});
							
							$("#people :checkbox").change(function(e) {
								var checked = $.map($("#people :checked"), function(checkbox) {
									return parseInt($(checkbox).val());
								});

								var scheduler = $(".scheduler").data("kendoScheduler");

								scheduler.dataSource.filter({
									operator: function(task) {
										return $.inArray(task.ownerID, checked) >= 0;
									}
								});
							});
							function checkDayInNextMonth(e) {
								startLimit = new Date('2017-5-1');
								endLimit = new Date('2017-5-31');
								if (e.event.start < startLimit || e.event.start > endLimit) {
									if (!document.getElementById('day-out-range-button').length) {
										document.getElementById('day-out-range-button').click();
									}
									e.preventDefault();
								}
								
							}
							
							function checkTaskIsApprovedOrPending(e) {
								if (e.event.statusID == 2 || e.event.statusID == 5) {
									//alert("Estimated time should not be less than 30 mins");
									if (!document.getElementById('pending-approved').length) {
										var d = document.getElementById('pending-approved-button').click();
									}
									e.preventDefault();
								}
								
							};
							
							function hideButtonTaskIsApprovedOrPending(e) {
								if (e.event.statusID == 2 || e.event.statusID == 5) {
									if (e.container.find(".k-edit-buttons") && e.container.find(".k-scheduler-update")) {
										var buttonsContainer = e.container.find(".k-edit-buttons");
										var saveButton = buttonsContainer.find(".k-scheduler-update");
										saveButton.hide();
									}
									
									if (e.container.find(".k-edit-buttons") && e.container.find(".k-scheduler-delete")) {
										var buttonsContainer = e.container.find(".k-edit-buttons");
										var deleteButton = buttonsContainer.find(".k-scheduler-delete");
										deleteButton.hide();
									}
									
									//e.preventDefault();
								}
								//e.preventDefault();
							};
						});	
						
						(function($, kendo) {
							//Extending the Scheduler build in validator:
							$.extend(true, kendo.ui.validator, {
								rules: {
									// Add custom validation rule to validate category field
									workwithID: function(input, params) {
										if (input.is("[name=workwithID]")) {
											if (input.val() == '0') {
												//console.log(input.val());
												return false;
											} else {
												return true;
											}
										}
										return true;
									},
									certificationID: function(input, params) {
										if (input.is("[name=certificationID]")) {
											if (input.val() == '0') {
												//console.log(input.val());
												return false;
											} else {
												return true;
											}
										}
										return true;
									},
									worktypeID: function(input, params) {
										if (input.is("[name=worktypeID]")) {
											if (input.val() == '0') {
												//console.log(input.val());
												return false;
											} else {
												return true;
											}
										}
										return true;
									}
								},
								messages: {
									//custom rules messages
									workwithID: function(input) {
										return "Work with is required.";
									},
									certificationID: function(input) {
										return "Cetification is required.";
									},
									worktypeID: function(input) {
										return "Work type is required.";
									}
								}
							});
						})(jQuery, kendo);
						//end of custom validation code
					</script>
				</div>
				
			</div>
			<button type="button" id="day-out-range-button" class="day-out-range btn btn-info btn-lg display-none" data-toggle="modal" data-target="#day-out-range">Open Modal</button>
			<div id="day-out-range" class="modal fade" role="dialog">
				<div class="modal-dialog">
					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header block-theme">
							<button type="button" class="close fr m-0" data-dismiss="modal"><i class="icon-delete icon-white"></i></button>
							<h4 class="modal-title w-50pr">Alert</h4>
						</div>
						<div class="modal-body p-5">
							<div class="alert alert-warning">
								<strong>Warning!</strong> You selected a day out of range. Please choose another!
							</div>
						</div>
						<div class="modal-footer p-5 align-center">
							<button type="button" class="btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
			<button type="button" id="pending-approved-button" class="day-out-range btn btn-info btn-lg display-none" data-toggle="modal" data-target="#pending-approved">Open Modal</button>
			<div id="pending-approved" class="modal fade" role="dialog">
				<div class="modal-dialog">
					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header block-theme">
							<button type="button" class="close fr m-0" data-dismiss="modal"><i class="icon-delete icon-white"></i></button>
							<h4 class="modal-title w-50pr">Alert</h4>
						</div>
						<div class="modal-body p-5">
							<div class="alert alert-warning">
								<strong>Warning!</strong> You can only change tasks without pending and approved. Please choose another!
							</div>
						</div>
						<div class="modal-footer p-5 align-center">
							<button type="button" class="btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</body>
</html>